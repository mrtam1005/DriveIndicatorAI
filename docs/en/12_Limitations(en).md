[←前へ](11_Extensibility(en).md) | [次へ→](13_License(en).md) | [先頭へ](00_Technical_Documents(en).md)  

## 12. 既知の制限事項 (Known Limitations)  
    Drive Indicator AI は Windows の I/O 監視機能 (PerformanceCounter / ETW) を活用して動作しますが、  
    これらの仕組みには OS 側の制約や外部環境の影響があり、アプリ側で完全に制御できない部分があります。  
    この章では、Drive Indicator AI の既知の制限事項と、その理由・背景を説明します。  

### 12.1 ETW が利用できない環境が存在する  
    ETW (Event Tracing for Windows) は通常ユーザーモードで利用できますが、  
    以下の環境では動作しない場合があります :  

      ● 制限が発生するケース  
        • 企業環境で ETW がポリシーにより無効化されている  
        • セキュリティソフトが ETW をブロックしている  
        • Windows のトレースサービスが停止している  
        • 他アプリが同名セッションを占有している  

      ● 影響  
        • RAM ドライブの I/O が取得できない  
        • DriveMonitor が RAM ドライブを ｢常にアイドル｣ と判定する  
        • ログに ETW エラーが記録される  

      ● 回避策  
        • セッション名をユニークにして衝突を避ける (既に実装済み)  
        • ETW が使えない場合は RAM ドライブ監視をスキップ  

### 12.2 一部の RAMドライブ (RAMディスク) ソフトとの相性  
    RAMドライブ はソフトによって実装が異なるため、ETW の FileIO イベントが発生しない製品があります。  

      ● 影響  
        • 読み書きが行われても ETW にイベントが届かない  
        • Drive Indicator AI では ｢アイドル状態(読み/書き無し)｣ として表示される  

      ● 代表例  
        • 独自ドライバで I/O を処理する RAMドライブ  
        • Windows の FileIO イベントを発行しない製品  

### 12.3 PerformanceCounter の制限  
    PerformanceCounter (LogicalDisk) は Windows の仕様により、以下の制限があります。  

      ● 制限内容  
        • 一部の USB メモリが ｢ディスク｣ と認識されない  
        • ドライブ文字が割り当てられていないボリュームは監視不可  
        • インスタンス名が OS により変動することがある  
        • カウンタが初期化されるまで値が 0 になることがある  

      ● 影響  
        • 特定のドライブが監視対象に表示されない  
        • 起動直後に I/O が取得できない場合がある  

### 12.4 高 DPI 環境での WinForms の制約  
    Drive Indicator AI は DPI 対応を独自実装していますが、  
    WinForms 自体の制約により以下の問題が発生する可能性があります。  

      ● 制限内容  
        • Windows の DPI 設定を変更した直後は再起動が必要  
        • 一部の環境で PictureBox の描画が遅延する  
        • マルチモニタ環境で DPI が混在すると描画が不安定になる場合がある  

      ● 影響  
        • サンプルアイコンの表示が一瞬乱れる  
        • DPI 切り替えが即時反映されない  

### 12.5 タスクスケジューラが無効化されている環境  
    Drive Indicator AI の自動実行はタスクスケジューラ方式ですが、  
    企業環境ではタスクスケジューラが無効化されている場合があります。  

      ● 影響  
        • 自動実行が登録できない  
        • schtasks.exe がエラーを返す  
        • ログにエラーが記録される  

### 12.6 権限の制限による影響  
    Drive Indicator AI は管理者権限不要で動作しますが、  
    権限が極端に制限された環境では以下の問題が発生します。  

      ● 制限内容  
        • TEMP フォルダへの書き込みが禁止されている  
        • PerformanceCounter へのアクセスが制限されている  
        • ETW がブロックされている  

      ● 影響  
        • ログが保存できない  
        • 監視が動作しない  
        • アプリが実行できない場合がある  

### 12.7 既知の制限事項まとめ  
    Drive Indicator AI の制限は主に Windows の仕様 と 外部環境 に起因します。  
      ┌──────────────┬─────────────┬─────────────┐  
      │ 項目                       │ 原因                     │ 影響                     │  
      ┝━━━━━━━━━━━━━━┿━━━━━━━━━━━━━┿━━━━━━━━━━━━━┥  
      │ ETW が使えない             │ ポリシー / セキュリティ  │ RAMドライブ監視不可      │  
      ├──────────────┼─────────────┼─────────────┤  
      │ RAMドライブの相性          │ 製品ごとの実装差         │ I/O が取得できない       │  
      ├──────────────┼─────────────┼─────────────┤  
      │ PerformanceCounter の制限  │ Windows の仕様           │ 一部ドライブが監視不可   │  
      ├──────────────┼─────────────┼─────────────┤  
      │ 高 DPI の制約              │ WinForms の仕様          │ 描画が不安定になる場合   │  
      ├──────────────┼─────────────┼─────────────┤  
      │ タスクスケジューラー無効   │ 企業環境の制限           │ 自動実行不可             │  
      ├──────────────┼─────────────┼─────────────┤  
      │ 権限制限                   │ セキュリティ設定         │ ログ / 監視が動作しない  │  
      └──────────────┴─────────────┴─────────────┘  
    Drive Indicator AI はこれらの制限を考慮しつつ、  
    可能な範囲で最も安定した動作を実現するよう設計されています。  

[←前へ](11_Extensibility(en).md) | [次へ→](13_License(en).md) | [先頭へ](00_Technical_Documents(en).md)  