[←前へ](09_Logging(ja).md) | [次へ→](11_Extensibility(ja).md) | [先頭へ](00_Technical_documents(ja).md)  

## 10. 多言語対応 (Internationalization)  
    Drive Indicator AI は、UI テキストをすべて JSON ファイルで管理する  
    国際化システムを採用しています。  
    これにより、アプリの再コンパイルなしで新しい言語を追加でき、  
    ユーザーが即座に UI 言語を切り替えられる柔軟な設計になっています。  

### 10.1 多言語対応の全体構造  
    多言語対応は以下の 3 つの要素で構成されています :  
      1. 言語ファイル (JSON)  
      2. LangManager (翻訳管理クラス)  
      3. UI での適用 (SettingsForm / TrayIconManager など)  
      ──────────────────────────────────────  
      lang_xx.json → LangManager → UI に適用  
      ──────────────────────────────────────  

### 10.2 言語ファイル (JSON) の構造  
    言語ファイルは以下のフォルダに配置されます :  

      Resources/  
        └─ Language/  
               ├─ lang_ar.json  
               ├─ lang_cs.json  
               ├─ lang_da.json  
               ├─ lang_de.json  
               ├─ lang_el.json  
               ├─ lang_en.json  
               ├─ lang_es.json  
               ├─ lang_fi.json  
               ├─ lang_fr.json  
               ├─ lang_he.json  
               ├─ lang_hi.json  
               ├─ lang_hu.json  
               ├─ lang_id.json  
               ├─ lang_it.json  
               ├─ lang_ja.json  
               ├─ lang_ko.json  
               ├─ lang_ms.json  
               ├─ lang_nb.json  
               ├─ lang_nl.json  
               ├─ lang_pl.json  
               ├─ lang_pt.json  
               ├─ lang_ro.json  
               ├─ lang_ru.json  
               ├─ lang_sv.json  
               ├─ lang_th.json  
               ├─ lang_tr.json  
               ├─ lang_uk.json  
               ├─ lang_vi.json  
               ├─ lang_zh-CN.json  
               ├─ lang_zh-TW.json  
               └─ languages.json  

#### 10.2.1 lang_xx.json の構造 (例 : lang_ja.json)  
    ────────────────────────────────────────────────────────────────────  
    {
      "SettingsFormText": "Drive Indicator AI",
      "AlreadyRunningMessage": "Drive Indicator AI はすでに実行中です。",
      "MenuSetting": "設定",
      "MenuQuit": "終了",
      "labelSettingsText": "設定",
      "chkStartupText": "Windows起動時に自動実行",
      "gbDisplayDriveSelectionText": "表示ドライブ選択",
      "BtnColorText": "色選択",
      "gbDriveLettersColorText": "ドライブ文字色",
      "gbDisplayIntervalText": "表示間隔 [msec]",
      "BtnBrowseText": "フォルダー選択",
      "gbIconImageFolderText": "アイコン画像フォルダー",
      "chkEnableLogText": "logを記録する",
      "BtnOpenLogFolderText": "logフォルダーを開く",
      "BtnLogClearText": "logクリア",
      "gbLogText": "Log",
      "gbIconSampleText": "アイコンサンプル",
      "BtnVersionInfoText": "バージョン情報",
      "BtnCancelText": "キャンセル",
      "BtnSaveText": "保存",
      "BrowsWindowMessage": "アイコン画像フォルダーを選択してください",
      "LogFolderOpenErrorMessage": "logフォルダーを開けませんでした。",
      "LogFolderOpenErrorTitle": "エラー",
      "LogClearQuestionMessage": "ログをクリアしてもよろしいですか？",
      "LogClearQuestionTitle": "確認",
      "LogClearErrorMessage": "logをクリアできませんでした。",
      "LogClearErrorTitle": "エラー"
    }
    ────────────────────────────────────────────────────────────────────  

#### 10.2.2 特徴  
    • キーは英語で統一  
    • 値が翻訳文字列  
    • 新しい言語を追加する場合はファイルをコピーして翻訳するだけ  

### 10.3 languages.json (言語一覧)  
    言語選択コンボボックスに表示するための一覧ファイルです。  
    ───────────────────────────────────────────────────────────────────────────────────────────────  
    [
      { "Name": "عربي", "Code": "ar", "English_Name": "Arabic", "Japanese_Name": "アラビア語" },
      { "Name": "čeština", "Code": "cs", "English_Name": "Czech", "Japanese_Name": "チェコ語" },
      { "Name": "Dansk", "Code": "da", "English_Name": "Danish", "Japanese_Name": "デンマーク語" },
      { "Name": "Deutsch", "Code": "de", "English_Name": "German", "Japanese_Name": "ドイツ語" },
      { "Name": "ελληνικά", "Code": "el", "English_Name": "Greek", "Japanese_Name": "ギリシャ語" },
      { "Name": "English", "Code": "en", "English_Name": "English", "Japanese_Name": "英語" },
      { "Name": "Español", "Code": "es", "English_Name": "Spanish", "Japanese_Name": "スペイン語" },
      { "Name": "suomi", "Code": "fi", "English_Name": "Finnish", "Japanese_Name": "フィンランド語" },
      { "Name": "Français", "Code": "fr", "English_Name": "French", "Japanese_Name": "フランス語" },
      { "Name": "עִברִית", "Code": "he", "English_Name": "Hebrew", "Japanese_Name": "ヘブライ語" },
      { "Name": "हिंदी", "Code": "hi", "English_Name": "Hindi", "Japanese_Name": "ヒンディー語" },
      { "Name": "magyar", "Code": "hu", "English_Name": "Hungarian", "Japanese_Name": "ハンガリー語" },
      { "Name": "Indonesia", "Code": "id", "English_Name": "Indonesian", "Japanese_Name": "インドネシア語" },
      { "Name": "Italiano", "Code": "it", "English_Name": "Italian", "Japanese_Name": "イタリア語" },
      { "Name": "日本語", "Code": "ja", "English_Name": "Japanese", "Japanese_Name": "日本語" },
      { "Name": "韓国語", "Code": "ko", "English_Name": "Korean", "Japanese_Name": "韓国語" },
      { "Name": "ملايو", "Code": "ms", "English_Name": "Malay", "Japanese_Name": "マレー語" },
      { "Name": "norsk", "Code": "nb", "English_Name": "Norwegian", "Japanese_Name": "ノルウェー語" },
      { "Name": "Nederlands", "Code": "nl", "English_Name": "Dutch", "Japanese_Name": "オランダ語" },
      { "Name": "ߔߏߟߐ߲", "Code": "pl", "English_Name": "Polish", "Japanese_Name": "ポーランド語" },
      { "Name": "Português", "Code": "pt", "English_Name": "Portuguese", "Japanese_Name": "ポルトガル語" },
      { "Name": "Română", "Code": "ro", "English_Name": "Romanian", "Japanese_Name": "ルーマニア語" },
      { "Name": "Русский", "Code": "ru", "English_Name": "Russian", "Japanese_Name": "ロシア語" },
      { "Name": "Svenska", "Code": "sv", "English_Name": "Swedish", "Japanese_Name": "スウェーデン語" },
      { "Name": "แบบไทย", "Code": "th", "English_Name": "Thai", "Japanese_Name": "タイ語" },
      { "Name": "Türkçe", "Code": "tr", "English_Name": "Turkish", "Japanese_Name": "トルコ語" },
      { "Name": "українська", "Code": "uk", "English_Name": "Ukrainian", "Japanese_Name": "ウクライナ語" },
      { "Name": "Tiếng Việt", "Code": "vi", "English_Name": "Vietnamese", "Japanese_Name": "ベトナム語" },
      { "Name": "中国語 (簡体字) ", "Code": "zh-CN", "English_Name": "Chinese (Simplified)", "Japanese_Name": "中国語 (簡体字) " },
      { "Name": "中国語 (繁体字) ", "Code": "zh-TW", "English_Name": "Chinese (Traditional)", "Japanese_Name": "中国語 (繁体字) " }
    ]
    ───────────────────────────────────────────────────────────────────────────────────────────────  

    LangManager はこのファイルを読み込み :  
      • 言語コード   → 言語名  
      • 言語コード   → 言語名(英語)  
      • 言語名       → 言語コード  
      • 言語名(英語) → 言語コード  
      ･ 言語名       → 言語名(英語)  
    の相互変換を行います。  

### 10.4 LangManager の役割  
    LangManager は多言語対応の中心となるクラスです。  

      LangManager  
        ├─ Load(languageCode)  
        ├─ T(key)  
        ├─ LoadLanguagesJson()  
        ├─ GetNameToCode(languageName)  
        ├─ GetEnameToCode(languageEname)  
        ├─ GetName(languageCode)  
        ├─ GetEname(languageCode)  
        └─ GetNameToEname(languageName)  

#### 10.4.1 Load(languageCode)  
    • lang_xx.json を読み込み  
    • Dictionary<string, string> に格納  
    • 翻訳テーブルを構築  

#### 10.4.2 T(key)  
    翻訳文字列を取得するメソッド。  
      ──────────────────────────────────────────────────  
      string text = Lang.T("Settings");  
      ──────────────────────────────────────────────────  
    キーが存在しない場合は キー名をそのまま返すため、翻訳漏れがあっても UI が壊れない。  

### 10.5 UI での適用  
    UI コンポーネントは、LangManager を使ってテキストを更新します。  

#### 10.5.1 SettingsForm の例  
    ───────────────────────────────────────────────────  
    labelSettings.Text = Lang.T("labelSettingsText");  
    BtnSave.Text = Lang.T("BtnSaveText");  
    ───────────────────────────────────────────────────  

#### 10.5.2 TrayIconManager の例  
    ───────────────────────────────────────────────────  
    menu.Items.Settings.Text = Lang.T("MenuSettings");  
    menu.Items.Quit.Text = Lang.T("MenuQuit");  
    ───────────────────────────────────────────────────  

#### 10.5.3 言語切り替え時の動作  
    1. SettingsForm で言語を選択  
    2. SettingsManager に保存  
    3. 次回起動時に LangManager.Load() が呼ばれる  
    4. UI が新しい言語で表示される  

### 10.6 新しい言語の追加方法 (開発者向け)  
    Drive Indicator AI の国際化は非常に簡単に拡張できます。  

      手順 1 : 言語ファイルをコピー  
        "lang_en.json" をコピーして "lang_xx.json" を作成。  

      手順 2 : 翻訳を記述  
        "lang_xx.json" の値をＸＸＸＸ語に変更。  

      手順 3 : languages.json に追加  
        ───────────────────────────────────────────────────────────────────────────────────────────  
        [  
          { "Name": "عربي", "Code": "ar", "English_Name": "Arabic", "Japanese_Name": "アラビア語" },  
          {    ･  
          {    ･  
          {    ･  
          { "Name": "中国語 (繁体字) ", "Code": "zh-TW", "English_Name": "Chinese (Traditional)", "Japanese_Name": "中国語 (繁体字) " }  
          { "Name": "ＸＸＸＸ", "Code": "xx", "English_Name": "xxxx", "Japanese_Name": "ＸＸＸＸ語" }  
        ]  
        ───────────────────────────────────────────────────────────────────────────────────────────  

      手順 4 : SettingsForm の言語選択に自動反映  
        LangManager が自動で読み込むため、コード変更は不要。  

### 10.7 設計上の工夫  
    Drive Indicator AI の多言語対応は、以下の点で優れています :  
      1. JSON ベースで拡張性が高い  
        新しい言語を追加するのにコード変更が不要。  
      2. 翻訳漏れに強い  
        キーが見つからない場合はキー名を返すため、UI が壊れない。  
      3. 言語一覧も JSON 管理  
        UI とロジックが完全に分離されている。  
      4. 設定ファイルで言語を保持  
        ユーザーが選んだ言語が次回起動時に反映される。  
      5. UI の再描画が簡単  
        SettingsForm.ApplyLanguage() で UI を一括更新。  

### 10.8 多言語対応のまとめ  
    Drive Indicator AI の i18n システムは :  
      • 軽量  
      • 拡張性が高い  
      • 壊れにくい  
      • 開発者に優しい  
    という、非常に優れた設計になっています。  
    国際化対応が必要なアプリの模範例と言える構造です。  

[←前へ](09_Logging(ja).md) | [次へ→](11_Extensibility(ja).md) | [先頭へ](00_Technical_documents(ja).md)  